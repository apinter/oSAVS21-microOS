import Vue from '@vitejs/plugin-vue';
import ViteIcons from 'vite-plugin-icons';
import ViteComponents from 'vite-plugin-components';
import Markdown from 'vite-plugin-md';
import WindiCSS from 'vite-plugin-windicss';
import RemoteAssets from 'vite-plugin-remote-assets';
import { ArgumentsType } from '@antfu/utils';
import { SlidevMarkdown } from '@slidev/types';
import * as vite from 'vite';
import { InlineConfig, Plugin } from 'vite';
import * as fs from '@slidev/parser/fs';
export { fs as parser };

interface SlidevEntryOptions {
    /**
     * Markdown entry
     *
     * @default 'slides.md'
     */
    entry?: string;
    /**
     * Theme id
     */
    theme?: string;
    /**
     * Root path
     *
     * @default process.cwd()
     */
    userRoot?: string;
}
interface ResolvedSlidevOptions {
    data: SlidevMarkdown;
    entry: string;
    userRoot: string;
    cliRoot: string;
    clientRoot: string;
    theme: string;
    themeRoots: string[];
    roots: string[];
    mode: 'dev' | 'build';
}
interface SlidevPluginOptions extends SlidevEntryOptions {
    vue?: ArgumentsType<typeof Vue>[0];
    markdown?: ArgumentsType<typeof Markdown>[0];
    components?: ArgumentsType<typeof ViteComponents>[0];
    windicss?: ArgumentsType<typeof WindiCSS>[0];
    icons?: ArgumentsType<typeof ViteIcons>[0];
    remoteAssets?: ArgumentsType<typeof RemoteAssets>[0];
}
interface SlidevServerOptions {
    onDataReload?: (newData: SlidevMarkdown, data: SlidevMarkdown) => void;
}
declare function getClientRoot(): string;
declare function getCLIRoot(): string;
declare function isPath(name: string): boolean;
declare function getThemeRoots(name: string, entry: string): string[];
declare function resolveOptions(options: SlidevEntryOptions, mode: ResolvedSlidevOptions['mode'], promptForInstallation?: boolean): Promise<ResolvedSlidevOptions>;

declare module 'vite' {
    interface UserConfig {
        /**
         * Custom internal plugin options for Slidev (advanced)
         *
         * @see https://github.com/slidevjs/slidev/blob/main/packages/slidev/node/options.ts#L50
         */
        slidev?: SlidevPluginOptions;
    }
}

declare function createServer(options: ResolvedSlidevOptions, viteConfig?: InlineConfig, serverOptions?: SlidevServerOptions): Promise<vite.ViteDevServer>;

declare function ViteSlidevPlugin(options: ResolvedSlidevOptions, pluginOptions: SlidevPluginOptions, serverOptions?: SlidevServerOptions): Promise<Plugin[]>;

declare function createWindiCSSPlugin({ themeRoots, clientRoot, userRoot, roots, data }: ResolvedSlidevOptions, { windicss: windiOptions }: SlidevPluginOptions): Promise<vite.Plugin[]>;

export { ResolvedSlidevOptions, SlidevEntryOptions, SlidevPluginOptions, SlidevServerOptions, ViteSlidevPlugin, createServer, createWindiCSSPlugin, getCLIRoot, getClientRoot, getThemeRoots, isPath, resolveOptions };
