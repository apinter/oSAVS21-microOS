"use strict";Object.defineProperty(exports, "__esModule", {value: true});















var _chunkI7XP7O2Cjs = require('./chunk-I7XP7O2C.js');

// src/fs.ts
var _fs = require('fs');
var _path = require('path');
async function load(filepath, themeMeta, content) {
  const dir = _path.dirname.call(void 0, filepath);
  const markdown = content != null ? content : await _fs.promises.readFile(filepath, "utf-8");
  const data = _chunkI7XP7O2Cjs.parse.call(void 0, markdown, filepath, themeMeta);
  const entries = new Set([
    filepath
  ]);
  for (const slide of data.slides) {
    if (!slide.frontmatter.src)
      continue;
    const path = _path.resolve.call(void 0, dir, slide.frontmatter.src);
    const raw = await _fs.promises.readFile(path, "utf-8");
    const source = _chunkI7XP7O2Cjs.parseSlide.call(void 0, raw);
    const inline = _chunkI7XP7O2Cjs.__spreadValues.call(void 0, {}, slide);
    slide.source = _chunkI7XP7O2Cjs.__spreadValues.call(void 0, {
      filepath: path
    }, source);
    slide.inline = inline;
    Object.assign(slide, slide.source);
    slide.frontmatter = _chunkI7XP7O2Cjs.__spreadValues.call(void 0, _chunkI7XP7O2Cjs.__spreadValues.call(void 0, {}, slide.source.frontmatter), inline.frontmatter);
    data.features = _chunkI7XP7O2Cjs.mergeFeatureFlags.call(void 0, data.features, _chunkI7XP7O2Cjs.detectFeatures.call(void 0, raw));
    entries.add(path);
  }
  data.entries = Array.from(entries);
  return data;
}
async function save(data, filepath) {
  filepath = filepath || data.filepath;
  await _fs.promises.writeFile(filepath, _chunkI7XP7O2Cjs.stringify.call(void 0, data), "utf-8");
}
async function saveExternalSlide(slide) {
  await _fs.promises.writeFile(slide.filepath, _chunkI7XP7O2Cjs.stringifySlide.call(void 0, slide), "utf-8");
}


















exports.detectFeatures = _chunkI7XP7O2Cjs.detectFeatures; exports.filterDisabled = _chunkI7XP7O2Cjs.filterDisabled; exports.load = load; exports.mergeFeatureFlags = _chunkI7XP7O2Cjs.mergeFeatureFlags; exports.parse = _chunkI7XP7O2Cjs.parse; exports.parseAspectRatio = _chunkI7XP7O2Cjs.parseAspectRatio; exports.parseRangeString = _chunkI7XP7O2Cjs.parseRangeString; exports.parseSlide = _chunkI7XP7O2Cjs.parseSlide; exports.prettify = _chunkI7XP7O2Cjs.prettify; exports.prettifySlide = _chunkI7XP7O2Cjs.prettifySlide; exports.resolveConfig = _chunkI7XP7O2Cjs.resolveConfig; exports.resolveFonts = _chunkI7XP7O2Cjs.resolveFonts; exports.save = save; exports.saveExternalSlide = saveExternalSlide; exports.scanMonacoModules = _chunkI7XP7O2Cjs.scanMonacoModules; exports.stringify = _chunkI7XP7O2Cjs.stringify; exports.stringifySlide = _chunkI7XP7O2Cjs.stringifySlide;
